var HueApi = require("./../../hue-api/index.js").HueApi;
var lightstates = require("./../../hue-api/lightstate.js");

var testValues = require("./../support/testValues");

var api = new HueApi(testValues.host, testValues.username);

//api.registerUser(username, function(err, result) {
//api.connect(function(err, result) {
//api.registeredUsers(function(err, result) {
//api.lights(false, function(err, result) {
//api.lightStatus(2, function(err, result) {
//api.lightState(2,
//    {
////        "on": true
//        "on": false
//    },
//    function(err, result) {
//    console.log(err);
//    console.log(result);
//});


//var connect = api.connect()
//    .then(function() {
//        console.log(arguments[0]);
//    }).done();

//api.description().then(function(result) { console.log(result)}).done();


//require("./../hue-api/index.js").locateBridges().then(function(bridge) {
//    console.log(bridge[0].host);
//    api = new HueApi(bridge[0].host, testValues.username);
//    api.connect().then(function(details) {
//        console.log(details);
//    }).done();
//}).done();

function showUsers() {
    api.registeredUsers().then(_consoleLog).done();
}

//api.unregisterUser("cda34c22a0995dfaa389a1c2fb6a93c1").then(_consoleLog).done();
//showUsers();

//api.registerUser("pmurray2", "blah").then(_consoleLog).done();
//showUsers();

//api.lights().then(_consoleLog).done();

//api.lightStatus(2).then(_consoleLog).done();

api.setLightState(2, {"bri": 10000}).then(_consoleLog).fail(_consoleLog).done();

function _consoleLog(value) {
    console.log(value);
}

//var state = lightstates.create().hsl(360, 100, 100).on();
//var state = lightstates.create().white(1, 99).on();
//var state = lightstates.create().white().on();
//var state = lightstates.create().xy(0.1, 0.2).transition(2);
//var state = lightstates.create().rgb(97, 0, 133).brightness(100).on();
//var state = lightstates.create().on();
//console.log(state);
//api.setLightState(2,
//    state,
//    function(err, result) {
//    console.log(err);
//    console.log(result);
//});
//
//api.lightStatus(2, function(err, result) {
//    console.log(result);
//})

//api.getGroups(function(err, result) {
//    console.log(err);
//    console.log(result);
//})

//var url = "http://192.168.2.132:9000/description.xml";
//console.log(url);
//var parts = url.split('/');
//console.log(parts[0].toLowerCase());
//if (parts[0].toLowerCase() === 'http:') {
//    console.log(parts[2]);
//}
////var pattern = new RegEx("/http/i");
//var matches = url.match(/^http://([a-z0-9]+)\.([a-z0-9\-]+)\.[a-z]+//i);
//console.log(matches);


//api.locateBridges()

//    .then(function (values) {
//        console.log(values);
//    })
//    .done();